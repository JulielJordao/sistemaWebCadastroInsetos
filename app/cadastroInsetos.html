<!DOCTYPE html>
<html ng-app="app">
    <head>
        <meta charset="utf-8">
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
        <!-- Arquivo genérico de estilos -->

        <!-- <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/> -->
        <!-- <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> -->
        <!-- <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script> -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/estilos.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">

    </head>
    <title>Cadastro de Insetos</title>
</head>
<body ng-controller="cadastroInsetos">
    <div ng-include="'view/cabecalho.html'"></div>
    <div class="row jumbotron" style="padding:0px; heigth:65px !important; padding-left: 20px !important;">
        <h2>Cadastro de Insetos</h2>
    </div>
    <form class="" name="cadastroInsetoForm">

        <div class="col-sm-12" style="background-color:white; padding-bottom:10px">
            <div class="col-sm-7" style="padding-left:0px; margin-top: -6px;">
                <p>Info: Insira uma imagem correspondente ao inseto a ser cadastrado</p>
                <form id="fileupload">
                    <div class="row fileupload-buttonbar">
                        <div class="col-lg-12">
                            <!-- O fileinput-botton span é usado para estilizar o campo de arquivo no botão -->
                            <span class="btn btn-success input-group btn-block">
                                <input type="file" class="form-control-file" accept="image/*" file-model="url.image" onchange="readURL(this);" ng-required="true" style="max-heigth:100%; max-width:100%"/>
                            </span>
                            <div class="imagemCadatro">
                                <img id="blah" src="#" alt="Nenhuma Imagem" style="margin-top: 10px; max-heigth:100%; max-width:100%" ng-show="url.image !== undefined"/>
                                <img id="temp" src="img/sem-imagem.png" alt="sem-imagem" style="margin-top: 10px" ng-show="url.image === undefined" ng-required="true">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-sm-5">
                <div class="row">
                    <fieldset >
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="infoCadastro">Nome do Inseto</label>
                                <input type="text" class="form-control" name="name" value="" ng-model="insetos.nome">
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <label for="associarOrdem">Associar a uma Ordem</label>
                            <div class="input-group">
                                <input type="text" class="form-control" ng-maxlength="11" ng-model="insetos.ordem.nome" ng-disabled="true" required="required">
                                <span class="input-group-btn">
                                    <button class="glyphicon glyphicon-search btn btn-primary" type="button" data-toggle="modal" data-target="#modalAssociarOrdem"></button>
                                </span>

                            </div>
                        </div>

                        <div class="col-sm-12">
                            <hr>
                            <h4 style="text-align: center;">Listagem de Características Vinculadas</h4>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Remover Tudo
                                                <button type="button" name="button" ng-click="removerTudo()">
                                                    <span class="glyphicon glyphicon-remove" style="color:red;"></button>
                                                </th>
                                                <th>Adicionar
                                                    <button type="button" data-toggle="modal" data-target="#myModal" onclick="removerClasseInvalida()">
                                                        <span class="glyphicon glyphicon-zoom-in"></span>
                                                    </button>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="x in insetos.caracteristicas">
                                                <td>{{x.nome}}</td>
                                                <td style="text-align: center;">
                                                    <a href="#" ng-click="removerLinhaCaracteristica(x)">
                                                        <span class="glyphicon glyphicon-remove" style="color:red;"></span>
                                                    </a>
                                                </td>
                                                <td>Adicionado</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="row">
                        <div class="pull-right">
                            <button type="button" class="btn-primary btn" ng-click="submeterCadastro()" ng-disabled="">Confimar Cadastro</button>
                        </div>
                    </div>
                </div>
                <div ng-include="'view/modalCaracteristicas.html'"></div>
                <div ng-include="'view/modalOrdem.html'"></div>
            </div>
        </form>

        <div ng-include="'view/footer.js'"></div>
        <script src="js/libs/angular.min.js"></script>
        <script src="js/libs/angular-route.min.js"></script>
        <script src="js/libs/jquery-1.12.4.min.js"></script>
        <script src="js/vendor/jquery.ui.widget.js"></script>
        <script src="js/libs/ui-bootstrap-tpls-2.2.0.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="app.js"></script>
    </body>
    <style>
        .modal-body {
            height: 250px;
            overflow-y: auto;
        }

    </style>
</html>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function(e) {
                $('#blah').attr('src', e.target.result);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    function removerClasseInvalida() {
        window.setTimeout(function() {
            $('.modal-backdrop').remove();
        }, 200);
    };
</script>
